---
// Import the necessary modules

// Destructure the props passed to the Astro component
const { title, mission } = Astro.props;

// Define TypeScript interface for props
interface Props {
  title: string;
  mission: string;
}
---

<!-- The root section of the component -->
<section
  class="mx-auto max-w-[85rem] px-4 py-10 sm:px-6 sm:py-16 lg:px-8 lg:py-14 2xl:max-w-full relative overflow-hidden overflow-x-hidden"
>
  <!-- Light Mode: Particles -->
  <div class='absolute inset-0 block dark:hidden'>
    <div id='particles1-mission' class='absolute inset-0'></div>
    <div id='particles2-mission' class='absolute inset-0'></div>
    <div id='particles3-mission' class='absolute inset-0'></div>
  </div>

  <!-- Dark Theme: Stars -->
  <div class='absolute inset-0 hidden dark:block'>
    <div id='stars1-mission' class='absolute inset-0'></div>
    <div id='stars2-mission' class='absolute inset-0'></div>
    <div id='stars3-mission' class='absolute inset-0'></div>
  </div>
  <!-- The container for title and mission text -->
  <div class="text-center max-w-4xl mx-auto">
    <!-- The title of the section -->
    <h2
      class="mb-6 text-4xl font-black leading-tight tracking-wide text-goldenbrown-600 dark:text-goldenbrown-400 md:text-5xl lg:text-6xl"
    >
      {title}
    </h2>

    <!-- The mission text -->
    <div class="mb-6">
      <p
        class="max-w-prose mx-auto text-pretty font-normal text-neutral-600 dark:text-neutral-400 sm:text-lg leading-relaxed"
      >
        {mission}
      </p>
    </div>
  </div>

  <script is:inline>
    // Initialize background for mission section
    function generateParticles(n) {
      let value = `${Math.floor(Math.random() * 2560)}px ${Math.floor(Math.random() * 2560)}px #98141d`;
      for (let i = 2; i <= n; i++) {
        // Alternate between red and green
        const color = i % 2 === 0 ? '#98141d' : '#006233';
        value += `, ${Math.floor(Math.random() * 2560)}px ${Math.floor(Math.random() * 2560)}px ${color}`;
      }
      return value;
    }

    function generateStars(n) {
      let value = `${Math.floor(Math.random() * 2560)}px ${Math.floor(Math.random() * 2560)}px #fff`;
      for (let i = 2; i <= n; i++) {
        value += `, ${Math.floor(Math.random() * 2560)}px ${Math.floor(Math.random() * 2560)}px #fff`;
      }
      return value;
    }

    // Initialize mission section background
    const particlesSmall = generateParticles(300);
    const particlesMedium = generateParticles(150);
    const particlesLarge = generateParticles(75);
    
    const particles1 = document.getElementById('particles1-mission');
    const particles2 = document.getElementById('particles2-mission');
    const particles3 = document.getElementById('particles3-mission');

    if (particles1) {
      particles1.style.cssText = `
        width: 1px;
        height: 1px;
        border-radius: 50%;
        box-shadow: ${particlesSmall};
        animation: animStar 50s linear infinite;
      `;
    }

    if (particles2) {
      particles2.style.cssText = `
        width: 1.5px;
        height: 1.5px;
        border-radius: 50%;
        box-shadow: ${particlesMedium};
        animation: animateParticle 100s linear infinite;
      `;
    }

    if (particles3) {
      particles3.style.cssText = `
        width: 2px;
        height: 2px;
        border-radius: 50%;
        box-shadow: ${particlesLarge};
        animation: animateParticle 150s linear infinite;
      `;
    }

    const starsSmall = generateStars(300);
    const starsMedium = generateStars(150);
    const starsLarge = generateStars(75);
    
    const stars1 = document.getElementById('stars1-mission');
    const stars2 = document.getElementById('stars2-mission');
    const stars3 = document.getElementById('stars3-mission');

    if (stars1) {
      stars1.style.cssText = `
        width: 1px;
        height: 1px;
        border-radius: 50%;
        box-shadow: ${starsSmall};
        animation: animStar 50s linear infinite;
      `;
    }

    if (stars2) {
      stars2.style.cssText = `
        width: 1.5px;
        height: 1.5px;
        border-radius: 50%;
        box-shadow: ${starsMedium};
        animation: animateParticle 100s linear infinite;
      `;
    }

    if (stars3) {
      stars3.style.cssText = `
        width: 2px;
        height: 2px;
        border-radius: 50%;
        box-shadow: ${starsLarge};
        animation: animateParticle 150s linear infinite;
      `;
    }
  </script>
</section>
